---
layout: post
title: "2020년 01월 06월 개발로그"
---

[OPENCV JAVASCRIPT - CHANGING COLORSPACES](#opencv-js-change-colorspaces)

<a name="opencv-js-change-colorspaces"></a>
## [OPENCV JS - CHANGE COLORSPACES]

### GOAL

- In this tutorial, you will learn how to convert images from one color space to another, like RGB -> GRAY, RGB -> HSV etc.
- You will learn following functions: cv.cvtColor(), cv.inRange() etc.

### CONVERT COLOR

There are more than 150 color space conversion methods available in OpenCV. But we will look into the most widely used one: RGB and Gray.

```
cv.cvtColor(source, destination, code, dstCn = 0)
```

| source | input image |
| destination | output image of the same size and depth as source |
| code | color space conversion code |
| dstCn | number of channels in the destination image; if the parameter is 0, the number of the channels is derived automatically from source and code. |

<img id="opencv-js-change-colorspaces-input" src="/assets/images/first.jpg" width="100">

<canvas id="opencv-js-change-colorspaces-output"></canvas>

<script type="text/javascript">
  function opencvChangeColorspacesInputRun() {
    let o = document.getElementById('opencv-js-change-colorspaces-input');
    document.getElementById('opencv-js-change-colorspaces-output').width = o.clientWidth;
    document.getElementById('opencv-js-change-colorspaces-output').height = o.clientHeight;
    let source = cv.imread('opencv-js-change-colorspaces-input');
    let destination = new cv.Mat();
    cv.cvtColor(source, destination, cv.COLOR_RGBA2GRAY, 0);
    cv.imshow('opencv-js-change-colorspaces-output', destination);
    source.delete();
    destination.delete();
  }
  dispatch(opencvChangeColorspacesInputRun);
</script>

### IN RANGE

Check if array elements lie between the elements of two other arrays.

```
cv.inRange(source, lowerb, upperb, dst)
```

| source | first input image |
| lowerb | inclusive lower boundary Mat of the same size as source |
| upperb | inclusive upper boundary Mat of the same size as source |
| dst    | output image of the same size as source and cv.CV_8U type |

<img id="opencv-js-change-colorspaces-inrange-input" src="/assets/images/first.jpg" width="100">

<canvas id="opencv-js-change-colorspaces-inrange-output"></canvas>

<script type="text/javascript">
  function opencvJsChangeColorspacesInRangeRun() {
    let o = document.getElementById('opencv-js-change-colorspaces-inrange-input');
    document.getElementById('opencv-js-change-colorspaces-inrange-output').width = o.clientWidth;
    document.getElementById('opencv-js-change-colorspaces-inrange-output').height = o.clientHeight;
    let source = cv.imread('opencv-js-change-colorspaces-inrange-input');
    let destination = new cv.Mat();
    let low = new cv.Mat(source.rows, source.cols, source.type(), [0, 0, 0, 0]);
    let high = new cv.Mat(source.rows, source.cols, source.type(), [150, 150, 150, 255]);
    cv.inRange(source, low, high, destination);
    cv.imshow('opencv-js-change-colorspaces-inrange-output', destination);
    source.delete();
    destination.delete();
    low.delete();
    high.delete();
  }
  dispatch(opencvJsChangeColorspacesInRangeRun);
</script>

<!--
<a name="mathematics"></a>
## MATHEMATICS

__정의__ <math><mi>a</mi></math>와 같지는 않지만 <math><mi>a</mi></math>에 충분히 가까운 <math><mi>x</mi></math>를 잡으면 <math><mi>L</mi></math>에 얼마든지 가까운 <math><semantics><mrow><mi>f</mi><mrow><mo fence="true" stretchy="false">(</mo><mrow><mi>x</mi></mrow><mo fence="true" stretchy="false">)</mo></mrow></mrow></semantics></math> 값을 얻을 수 있을 때

<math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
 <semantics>
  <mrow>
   <mrow>
    <munder>
     <mi>lim</mi>
     <mrow>
      <mi>x</mi>
      <mo stretchy="false">→</mo>
      <mi>a</mi>
     </mrow>
    </munder>
    <mrow>
     <mi>f</mi>
     <mrow>
      <mo fence="true" stretchy="false">(</mo>
      <mrow>
       <mi>x</mi>
      </mrow>
      <mo fence="true" stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo stretchy="false">=</mo>
   <mi>L</mi>
  </mrow>
  <annotation encoding="StarMath 5.0">lim from { x -&gt; a } { f(x) } = L</annotation>
 </semantics>
</math>

로 나타내고 "<math><mi>x</mi></math>가 <math><mi>a</mi></math>에 접근할 때 <math><semantics><mrow><mi>f</mi><mrow><mo fence="true" stretchy="false">(</mo><mrow><mi>x</mi></mrow><mo fence="true" stretchy="false">)</mo></mrow></mrow></semantics></math>의 극한은 <math><mi>L</mi></math>이다."라고 말한다.
-->
